<!DOCTYPE html>
<html lang="lo">

<head>
    <meta charset="UTF-8">
    <title>‡ªÇ‡∫õ‡∫£‡ªÅ‡∫Å‡∫Æ‡∫°‡∫´‡∫≤‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Libertinus+Keyboard&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: sans-serif;
            margin: auto;
            padding: 5px;
        }

        h1 {
            text-align: center;
        }

        .person {
            flex-direction: row;
            gap: 10px;
            display: flex;
            margin-bottom: 10px;
            align-items: center;
            width: 100%;
        }

        .person input {
            padding: 6px 6px;
            flex: 1;
        }

        input[type="text"] {
            flex: 7;
            min-width: 0;
            font-size: 40px;
            padding: 10px;
        }

        input[type="number"] {
            flex: 3;
            min-width: 0;
            font-size: 40px;
            padding: 10px;
        }

        button {
            padding: 8px 12px;
            cursor: pointer;
            border-radius: 6px;
            background: #fff;
        }

        .result {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }

        .pay {
            color: red;
        }

        .receive {
            color: rgb(0, 64, 255);
        }

        .even {
            color: rgb(5, 150, 0);
        }
        button{
            font-size: 33px;
        }
        .remove {
            width: 44px;
            height: 44px;
            border: none;
            border-radius: 8px;
            background: #ff0000;
            color: #fff;
            font-weight: bold;

            font-size: 40px;
            display: flex;
            flex: none;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .result {
            font-size: 40px;
        }

        .remove:hover,
        .remove:active {
            background: #c53030;
            color: #fff;
        }

        .highlight {
            text-decoration: underline;
            font-weight: bold;
        }

        /* ‡∏ü‡∏≠‡∏ô‡∏ï‡πå Libertinus Keyboard */
        .libertinus-keyboard-regular {
            font-family: "Libertinus Keyboard", system-ui;
            font-weight: 400;
            font-style: normal;
        }

        /* ‡∏•‡∏≤‡∏¢‡∏ô‡πâ‡∏≥‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏ß‡πá‡∏ö */
        .watermark {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(-45deg);
            font-size: 300px;
            color: rgba(0, 0, 0, 0.035);
            /* ‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÉ‡∏™‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢ */
            pointer-events: none;
            /* ‡πÑ‡∏°‡πà‡∏Ç‡∏±‡∏î‡∏Å‡∏±‡∏ö‡∏Ñ‡∏•‡∏¥‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° */
            z-index: 9999;
            user-select: none;
            white-space: nowrap;
        }

        @media (max-width: 700px) {


            button.remove {
                flex: none;
                width: 44px;
                height: 44px;
                font-size: 40px;
                border-radius: 8px;
            }

            .result {
                font-size: 40px;
            }

            .watermark {
                font-size: 150px;
            }
        }
    </style>
</head>

<body>
    <div class="watermark libertinus-keyboard-regular">TSR</div>

    <h1>üí∞ ‡ªÇ‡∫õ‡∫£‡ªÅ‡∫Å‡∫Æ‡∫°‡∫´‡∫≤‡∫ô‡ªÄ‡∫á‡∫¥‡∫ô</h1>

    <div id="inputs">
        <!-- ‡∏ä‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô 6 ‡∏Ñ‡∏ô -->
        <div class="person"> <input type="text" value="‡∏Æ‡∏≤‡∏ß" /> <input type="number" value="20" /> <button class="remove"
                onclick="removePerson(this)">X</button> </div>
        <div class="person"> <input type="text" value="‡πÄ‡∏à‡∏°" /> <input type="number" value="20" /> <button class="remove"
                onclick="removePerson(this)">X</button> </div>
        <div class="person"> <input type="text" value="‡πÇ‡∏•‡πà" /> <input type="number" value="20" /> <button class="remove"
                onclick="removePerson(this)">X</button> </div>
        <div class="person"> <input type="text" value="‡πÄ‡∏õ‡πà‡∏á" /> <input type="number" value="12" /> <button
                class="remove" onclick="removePerson(this)">X</button> </div>
        <div class="person"> <input type="text" value="‡πÇ‡∏à" /> <input type="number" value="0" /> <button class="remove"
                onclick="removePerson(this)">X</button> </div>
        <div class="person"> <input type="text" value="‡πÄ‡∏à" /> <input type="number" value="0" /> <button class="remove"
                onclick="removePerson(this)">X</button> </div>
    </div>

    <button onclick="addPerson()">‚ûï ‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡∫Ñ‡∫ª‡∫ô</button>
    <button onclick="calculate()">üìä ‡∫Ñ‡∫≥‡∫ô‡∫ß‡∫ô</button>
    <button onclick="resetForm()">‚ôªÔ∏è ‡∫£‡∫µ‡ªÄ‡∫ä‡∫±‡∫î</button>

    <div class="result" id="result"></div>

    <script>
        function addPerson() {
            const div = document.createElement("div");
            div.className = "person";
            div.innerHTML = `
        <input type="text" placeholder="‡∫ä‡∫∑‡ªà" />
        <input type="number" value="0" />
        <button class="remove" onclick="removePerson(this)">X</button>`;
            document.getElementById("inputs").appendChild(div);
        }

        function removePerson(button) {
            button.parentElement.remove();
        }

        function resetForm() {
            const peopleDivs = document.querySelectorAll("#inputs .person");
            peopleDivs.forEach(div => div.children[1].value = 0);
            document.getElementById("result").innerHTML = "";
        }

        function calculate() {
            const peopleDivs = document.querySelectorAll("#inputs .person");
            const expenses = {};
            peopleDivs.forEach(div => {
                const name = div.children[0].value.trim();
                const paid = parseFloat(div.children[1].value) || 0;
                if (name) expenses[name] = paid;
            });

            const names = Object.keys(expenses);
            if (names.length === 0) {
                document.getElementById("result").innerHTML = "<p style='color:red'>\"‡∫Ñ‡∫ß‡∫ç\" ‡∫ç‡∫±‡∫á‡∫ö‡ªç‡ªà‡ªÑ‡∫î‡ªâ‡ªÉ‡∫™‡ªà‡∫ä‡∫∑‡ªà‡ªÉ‡∫ú‡ªÄ‡∫ó‡∫∑‡ªà‡∫≠</p>";
                return;
            }

            const total = Object.values(expenses).reduce((a, b) => a + b, 0);
            const share = total / names.length;

            const needToPay = [];
            const needToReceive = [];
            const even = [];

            for (const [name, paid] of Object.entries(expenses)) {
                const balance = paid - share;
                if (balance > 0) needToReceive.push({ name, amount: balance });
                else if (balance < 0) needToPay.push({ name, amount: -balance });
                else even.push(name);
            }

            needToPay.sort((a, b) => a.amount - b.amount);
            needToReceive.sort((a, b) => a.amount - b.amount);

            let result = `<p>‡∫•‡∫≤‡∫Ñ‡∫≤‡∫≠‡∫≤‡∫´‡∫≤‡∫ô‡∫•‡∫ß‡∫°: <span class="highlight">${total} ‡∫Å‡∫µ‡∫ö</span><br>
                          ‡ªÅ‡∫ö‡ªà‡∫á ${names.length} ‡∫Ñ‡∫ª‡∫ô ‡∫Ñ‡∫ª‡∫ô‡ªÄ‡∫•‡∫µ‡∫Å: <span class="highlight">${share.toFixed(2)} ‡∫Å‡∫µ‡∫ö</span></p>`;

            if (needToPay.length)
                result += `<p class="pay">üí∏ ‡∫Ñ‡∫ª‡∫ô‡∫ó‡∫µ‡ªà‡∫ï‡ªâ‡∫≠‡∫á‡∫à‡ªà‡∫≤‡∫ç‡ªÄ‡∫û‡∫µ‡ªà‡∫°:<br>${needToPay.map(p => `${p.name} ‡∫ï‡ªâ‡∫≠‡∫á‡∫à‡ªà‡∫≤‡∫ç ${p.amount.toFixed(2)} ‡∫Å‡∫µ‡∫ö`).join("<br>")}</p>`;
            if (needToReceive.length)
                result += `<p class="receive">ü§ë ‡∫Ñ‡∫ª‡∫ô‡∫ó‡∫µ‡ªà‡∫ï‡ªâ‡∫≠‡∫á‡ªÑ‡∫î‡ªâ‡ªÄ‡∫á‡∫¥‡∫ô‡∫Ñ‡∫∑‡∫ô:<br>${needToReceive.map(r => `${r.name} ‡∫ï‡ªâ‡∫≠‡∫á‡ªÑ‡∫î‡ªâ‡ªÄ‡∫á‡∫¥‡∫ô‡∫Ñ‡∫∑‡∫ô ${r.amount.toFixed(2)} ‡∫Å‡∫µ‡∫ö`).join("<br>")}</p>`;
            if (even.length)
                result += `<p class="even">üëå ‡∫Ñ‡∫ª‡∫ô‡∫ó‡∫µ‡ªà‡∫ö‡ªç‡ªà‡∫à‡ªâ‡∫≠‡∫á‡ªÄ‡∫Æ‡∫¥‡∫î‡∫´‡∫ç‡∫±‡∫á:<br>${even.join("<br>")}</p>`;

            document.getElementById("result").innerHTML = result;
        }
    </script>
</body>

</html>
